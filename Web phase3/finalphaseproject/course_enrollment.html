<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code kids-Course Enrollment</title>
    <link rel="stylesheet" href="enrollment.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="codekidsLogo.png">

    <style>
        body.theme1 {
            background-color: #f2f2f2;
            color: #000;
        }
        body.theme2 {
            background-color: #333333;
            color: #fff;
        }
        footer {
			background-color: #dddddd;
			color: #000000;
			text-align: center;
			padding: 2vh;
		   position: relative;
		   width: auto;
		   clear: both;
		}
    </style>

<script>
    function toggleMenu() {
        var menu = document.querySelector('nav ul');
        menu.classList.toggle('show');
    }

    function applySavedTheme() {
        const savedTheme = localStorage.getItem('selectedTheme');
        if (savedTheme) {
            document.body.classList.add(savedTheme);
        }
    }

    window.addEventListener('DOMContentLoaded', function () {
        applySavedTheme();
        fillChildNames();
        fillCourses();
        fillFilters();
    });

    function fillChildNames() {
        const childNames = JSON.parse(localStorage.getItem('childNames')) || [];
        const kidsDropdown = document.getElementById('kids');
        kidsDropdown.innerHTML = "";
		var option = document.createElement('option');
            option.value = '';
            option.textContent = '';
            kidsDropdown.appendChild(option);
        childNames.forEach(name => {
            option = document.createElement('option');
            option.value = name;
            option.textContent = name;
            kidsDropdown.appendChild(option);
        });
    }

    function fillCourses() { 
		const courses = [
			{ name: 'Python', tutor: 'T.Nuha', prerequisite: null, pic: 'images/IMG_B3AF9114E175-6.jpeg' },
			{ name: 'HTML', tutor: 'T.Mohammed', prerequisite: 'Prerequisite 1' , pic: 'images/html.png'},
			{ name: 'JavaScript', tutor: 'T.Mohammed', prerequisite: 'Prerequisite 2' , pic: 'images/IMG_B3AF9114E175-2.jpeg'},
			{ name: 'Scratch', tutor: 'T.Faisal', prerequisite: null , pic: 'images/IMG_B3AF9114E175-1.jpeg'},
			{ name: 'PHP', tutor: 'T.Sara', prerequisite: 'Prerequisite 1' , pic: 'images/IMG_B3AF9114E175-3.jpeg'},
			{ name: 'JAVA', tutor: 'T.Bader', prerequisite: 'Prerequisite 2' , pic: 'images/IMG_B3AF9114E175-5.jpeg'},
			{ name: 'C++', tutor: 'T.Arwa', prerequisite: null , pic: 'images/IMG_B3AF9114E175-4.jpeg'},
			{ name: 'JAVA2', tutor: 'T.Bader', prerequisite: 'Prerequisite 1' , pic: 'images/IMG_B3AF9114E175-5.jpeg'},
			{ name: 'Python2', tutor: 'T.Nuha', prerequisite: 'Prerequisite 2' , pic: 'images/IMG_B3AF9114E175-6.jpeg'},
		];

        courses.forEach(course => {
            const option = document.createElement('option');
            option.value = course.name;
            option.textContent = course.name; 
        });
    }

    function fillFilters() {
		const courses = [
			{ name: 'Python', tutor: 'T.Nuha', prerequisite: null, pic: 'images/IMG_B3AF9114E175-6.jpeg' },
			{ name: 'HTML', tutor: 'T.Mohammed', prerequisite: 'Prerequisite 1' , pic: 'images/html.png'},
			{ name: 'JavaScript', tutor: 'T.Mohammed', prerequisite: 'Prerequisite 2' , pic: 'images/IMG_B3AF9114E175-2.jpeg'},
			{ name: 'Scratch', tutor: 'T.Faisal', prerequisite: null , pic: 'images/IMG_B3AF9114E175-1.jpeg'},
			{ name: 'PHP', tutor: 'T.Sara', prerequisite: 'Prerequisite 1' , pic: 'images/IMG_B3AF9114E175-3.jpeg'},
			{ name: 'JAVA', tutor: 'T.Bader', prerequisite: 'Prerequisite 2' , pic: 'images/IMG_B3AF9114E175-5.jpeg'},
			{ name: 'C++', tutor: 'T.Arwa', prerequisite: null , pic: 'images/IMG_B3AF9114E175-4.jpeg'},
			{ name: 'JAVA2', tutor: 'T.Bader', prerequisite: 'Prerequisite 1' , pic: 'images/IMG_B3AF9114E175-5.jpeg'},
			{ name: 'Python2', tutor: 'T.Nuha', prerequisite: 'Prerequisite 2' , pic: 'images/IMG_B3AF9114E175-6.jpeg'},
		];
		
        const tutorsSet = new Set();
        const prerequisitesSet = new Set();

        courses.forEach(course => {
            tutorsSet.add(course.tutor);
            if (course.prerequisite) {
                prerequisitesSet.add(course.prerequisite);
            }
        });

        const tutors = Array.from(tutorsSet);
        const prerequisites = Array.from(prerequisitesSet);

        const filterDropdown = document.getElementById('filter');
        filterDropdown.innerHTML = "";

        const tutorOptgroup = document.createElement('optgroup');
        tutorOptgroup.label = 'By Tutor';
		var option = document.createElement('option');
            option.value = '';
            option.textContent = '';
            tutorOptgroup.appendChild(option);
			
        tutors.forEach(tutor => {
            option = document.createElement('option');
            option.value = tutor;
            option.textContent = tutor;
            tutorOptgroup.appendChild(option);
        });

        const prerequisiteOptgroup = document.createElement('optgroup');
        prerequisiteOptgroup.label = 'By Prerequisite Course';
        prerequisites.forEach(prerequisite => {
            const option = document.createElement('option');
            option.value = prerequisite;
            option.textContent = prerequisite;
            prerequisiteOptgroup.appendChild(option);
        });

        filterDropdown.appendChild(tutorOptgroup);
        filterDropdown.appendChild(prerequisiteOptgroup);
    }

    function enrollNow() {
		const courses = [
			{ name: 'Python', tutor: 'T.Nuha', prerequisite: null, pic: 'images/IMG_B3AF9114E175-6.jpeg' },
			{ name: 'HTML', tutor: 'T.Mohammed', prerequisite: 'Prerequisite 1' , pic: 'images/html.png'},
			{ name: 'JavaScript', tutor: 'T.Mohammed', prerequisite: 'Prerequisite 2' , pic: 'images/IMG_B3AF9114E175-2.jpeg'},
			{ name: 'Scratch', tutor: 'T.Faisal', prerequisite: null , pic: 'images/IMG_B3AF9114E175-1.jpeg'},
			{ name: 'PHP', tutor: 'T.Sara', prerequisite: 'Prerequisite 1' , pic: 'images/IMG_B3AF9114E175-3.jpeg'},
			{ name: 'JAVA', tutor: 'T.Bader', prerequisite: 'Prerequisite 2' , pic: 'images/IMG_B3AF9114E175-5.jpeg'},
			{ name: 'C++', tutor: 'T.Arwa', prerequisite: null , pic: 'images/IMG_B3AF9114E175-4.jpeg'},
			{ name: 'JAVA2', tutor: 'T.Bader', prerequisite: 'Prerequisite 1' , pic: 'images/IMG_B3AF9114E175-5.jpeg'},
			{ name: 'Python2', tutor: 'T.Nuha', prerequisite: 'Prerequisite 2' , pic: 'images/IMG_B3AF9114E175-6.jpeg'},
		];
        const selectedChild = document.getElementById('kids').value; 
        const selectedFilter = document.getElementById('filter').value;

        if (selectedChild=="" || selectedFilter == "") {
            alert('Please select both child and course before enrolling.');
            return;
        }

        const enrolledCourses = getFilteredCourses(selectedFilter);
        const enrollmentDetails = document.getElementById('enrollment-details');
        enrollmentDetails.innerHTML = "<p>Child: "+selectedChild+"</p>";

		
		var allCourses = document.querySelectorAll('#course'); 
		var checkNo = 0;
		for (var i = 0; i < allCourses.length; i++) {
			if (allCourses[i].checked) {
				courses.forEach(course => { 
					if(allCourses[i].value == course.name){
						enrollmentDetails.innerHTML += '<p>Course: '+course.name + ', Tutor: '+course.tutor+'</p>';
					}
				});
			}else{
				checkNo++;
			}
		}
		if(checkNo == allCourses.length){
			alert("You must select at least one course");
			return;
		}
        //document.getElementById('kids').value = ''; 
        //document.getElementById('filter').value = '';
    }


    function doFilter() { 
        const selectedFilter = document.getElementById('filter').value;
        const coursesBox = document.getElementById('coursesBox');
		coursesBox.innerHTML = '';
		var courseList = getFilteredCourses(selectedFilter);
        courseList.forEach(course => {
            coursesBox.innerHTML += ' <div class="card">'
												+'<img src="'+course.pic+'" alt="Scratch">'
												+'<div class="details">'
												+'	<h4>'+course.name+'</h4>'
												+'	<p>'+course.tutor+'</p>'
												+'</div>'
												+'<input type="checkbox"  id="course" value="'+course.name+'">'
											+'</div>';
        });
 
    }


        function getFilteredCourses(filter) { 
			const courses = [
				{ name: 'Python', tutor: 'T.Nuha', prerequisite: null, pic: 'images/IMG_B3AF9114E175-6.jpeg' },
				{ name: 'HTML', tutor: 'T.Mohammed', prerequisite: 'Prerequisite 1' , pic: 'images/html.png'},
				{ name: 'JavaScript', tutor: 'T.Mohammed', prerequisite: 'Prerequisite 2' , pic: 'images/IMG_B3AF9114E175-2.jpeg'},
				{ name: 'Scratch', tutor: 'T.Faisal', prerequisite: null , pic: 'images/IMG_B3AF9114E175-1.jpeg'},
				{ name: 'PHP', tutor: 'T.Sara', prerequisite: 'Prerequisite 1' , pic: 'images/IMG_B3AF9114E175-3.jpeg'},
				{ name: 'JAVA', tutor: 'T.Bader', prerequisite: 'Prerequisite 2' , pic: 'images/IMG_B3AF9114E175-5.jpeg'},
				{ name: 'C++', tutor: 'T.Arwa', prerequisite: null , pic: 'images/IMG_B3AF9114E175-4.jpeg'},
				{ name: 'JAVA2', tutor: 'T.Bader', prerequisite: 'Prerequisite 1' , pic: 'images/IMG_B3AF9114E175-5.jpeg'},
				{ name: 'Python2', tutor: 'T.Nuha', prerequisite: 'Prerequisite 2' , pic: 'images/IMG_B3AF9114E175-6.jpeg'},
            ];

            const filteredCourses = courses.filter(course => { 
                if (!filter.startsWith("Prerequisite")) {
                    return course.tutor === filter;
                } else {
                    return course.prerequisite === filter;
                }
                return true;
            });

            return filteredCourses;
        }
    </script>
</head>
<body>
    <header>
        <div class="logo">
            <img src="image/download.png" alt="Platform Logo">
            <h2>Code kids</h2>
        </div>
        <div class="menu-icon" onclick="toggleMenu()">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>
        <div>
            <nav>
                <ul>
                    <li><a href="home.html" accesskey="H">Home</a></li>
                    <li><a href="courses.html" accesskey="C">Courses</a></li>
                    <li><a href="tutors.html" accesskey="T">Tutors</a></li>
                    <li><a href="Admin.html" accesskey="A">Admin Dashboard</a></li>
                    <li><a href="parent%20dashboard.html" accesskey="P">Parent's Dashboard</a></li>
                </ul>
            </nav>
        </div>
     </header>
    <ul class="breadcrumb">
        <li><a href="home.html">Home</a></li>
        <li><a href="parent dashboard.html">Parent dashboard</a></li>
        <li><a href="course_enrollment.html">Course enrollment</a></li>
    </ul>

    <main>
        <h2>Course Enrollment</h2>
        <br><br>
        <div class="dropdowns-wrapper">
            <div class="dropdown-container">
                <label for="kids">Kids Name:</label>
                <select id="kids">
                </select>
            </div>
 
            <div class="dropdown-container">
                <label for="filter">Filter Courses:</label>
                <select id="filter" onchange="doFilter()">
                </select>
            </div>
        </div>

        <div class="row" id="coursesBox">
			
        </div>
        <br><br>
        <button class="enroll-button" onclick="enrollNow()">Enroll Now</button>
        <br><br><br><br>
        <div id="enrollment-details"></div>
    </main>

    <footer>
         <p>Contact: codeKida@acadmay.com | Phone: 966-508-666-4332</p>
         <p style="font-style: italic;">&copy; 2023 codeKids. All rights reserved.</p>

    </footer>
    <script>
        function toggleMenu() {
            var menu = document.querySelector('nav ul');
            menu.classList.toggle('show');
        }
    </script>
</body>
</html>
